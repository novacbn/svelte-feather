import{n as e,s as r}from"./common/index-f30bfb45.js";const t=[];function n(n,i=e){let a;const o=[];function s(e){if(r(n,e)&&(n=e,a)){const e=!t.length;for(let e=0;e<o.length;e+=1){const r=o[e];r[1](),t.push(r,n)}if(e){for(let e=0;e<t.length;e+=2)t[e][0](t[e+1]);t.length=0}}}return{set:s,update:function(e){s(e(n))},subscribe:function(r,t=e){const l=[r,t];return o.push(l),1===o.length&&(a=i(s)||e),r(n),()=>{const e=o.indexOf(l);-1!==e&&o.splice(e,1),0===o.length&&(a(),a=null)}}}}function i(e,r){void 0===r&&(r=!0);var t=e.hash,n=e.pathname,i=e.search;return r?n+i+t:n+i}function a(e){if(void 0===e&&(e=!1),e){var r=location.hash.slice(1);return new URL(r,location.origin)}return new URL(location)}var o=function(){return(o=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e}).apply(this,arguments)};function s(e,r,t){var n=e.set,i=e.subscribe,a=e.update;return o(o({},e),{set:function(e){e=t(e),n(e)},subscribe:function(e,t){return i((function(t){t=r(t),e(t)}),t)},update:function(e){a((function(n){return n=r(n),n=e(n),t(n)}))}})}var l,u=(l="search",function(e){var r=function(e){void 0===e&&(e={});var r=e.hash,t=void 0!==r&&r,n=e.readonly,i=void 0!==n&&n,a=e.replace;return{hash:t,readonly:i,replace:void 0!==a&&a}}(e),t=r.hash,o=r.readonly,u=r.replace;function h(){return a(t)[l]}function f(e){function r(r){e(h())}return e(h()),window.addEventListener("popstate",r),function(){window.removeEventListener("popstate",r)}}if(o)return{subscribe:n(h(),f).subscribe};function c(e){var r=a(t);r[l]=e,function(e,r,t){var n;void 0===r&&(r=!1),void 0===t&&(t=!1),n=r?i(location,!1)+"#"+i(e):i(e),t?history.replaceState(null,"",n):history.pushState(null,"",n);var a=history.state,o=new PopStateEvent("popstate",{state:a});window.dispatchEvent(o)}(r,t,u)}return s(n(h(),f),(function(e){return e}),(function(e){return c(e),e}))});function h(e,r,t){void 0===t&&(t={});var n=function(e){void 0===e&&(e={});var r=e.hash,t=void 0!==r&&r,n=e.replace;return{hash:t,replace:void 0!==n&&n}}(t),i=n.hash,o=n.replace;return s(u({hash:i,replace:o}),(function(t){var n=new URLSearchParams(t);return"boolean"==typeof r?n.has(e):n.has(e)?n.get(e):r}),(function(t){var n=a(i).searchParams;return"boolean"==typeof r?t?n.set(e,""):n.delete(e):t&&t!==r?n.set(e,t):n.delete(e),n.toString().replace(/=&/g,"&").replace(/=$/g,"")}))}var f=function(){return(f=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e}).apply(this,arguments)};function c(e,r){void 0===r&&(r={});var t=function(e){return void 0===e&&(e={}),f({event:void 0,event_source:void 0,prefix:"svelte-commons."},e)}(r),i=t.event,a=t.event_source,o=t.prefix;return function(r,t){o&&(r=o+r);var l=e.getItem(r);return s(n(l?JSON.parse(l):t,(function(n){var o;function s(i){StorageEvent=i.detail?i.detail:i,i.storageArea===e&&i.key===r&&(i.newValue?n(JSON.parse(i.newValue)):n(t))}if(i)return null===(o=a)||void 0===o||o.addEventListener(i,s),function(){var e;return null===(e=a)||void 0===e?void 0:e.removeEventListener(i,s)}})),(function(e){return e}),(function(n){return void 0===n&&(n=t),n===t?e.removeItem(r):e.setItem(r,JSON.stringify(n)),n}))}}var p="undefined"!=typeof window?window:void 0,d=(p.localStorage&&c(p.localStorage,{event:"storage",event_source:p}),p.sessionStorage&&c(p.sessionStorage,{event:"storage",event_source:p}),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{});!function(e,r){e(r={exports:{}},r.exports)}((function(e){!function(r,t){e.exports?e.exports=t():r.tv4=t()}(d,(function(){var e,r,t,n;Object.keys||(Object.keys=(e=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),n=(t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var a=[];for(var o in i)e.call(i,o)&&a.push(o);if(r)for(var s=0;s<n;s++)e.call(i,t[s])&&a.push(t[s]);return a})),Object.create||(Object.create=function(){function e(){}return function(r){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=r,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var r=Object(this),t=r.length>>>0;if(0===t)return-1;var n=0;if(arguments.length>1&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=t)return-1;for(var i=n>=0?n:Math.max(t-Math.abs(n),0);i<t;i++)if(i in r&&r[i]===e)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var r="tv4_test_frozen_key";e.hasOwnProperty(r);)r+=Math.random();try{return e[r]=!0,delete e[r],!1}catch(e){return!0}});var i={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},a={"*":!0};function o(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,(function(e){return"%"+e.substring(3)}))}function s(e){var r="";i[e.charAt(0)]&&(r=e.charAt(0),e=e.substring(1));var t="",n="",s=!0,l=!1,u=!1;"+"===r?s=!1:"."===r?(n=".",t="."):"/"===r?(n="/",t="/"):"#"===r?(n="#",s=!1):";"===r?(n=";",t=";",l=!0,u=!0):"?"===r?(n="?",t="&",l=!0):"&"===r&&(n="&",t="&",l=!0);for(var h=[],f=e.split(","),c=[],p=0;p<f.length;p++){var d=f[p],m=null;if(-1!==d.indexOf(":")){var v=d.split(":");d=v[0],m=parseInt(v[1],10)}for(var y={};a[d.charAt(d.length-1)];)y[d.charAt(d.length-1)]=!0,d=d.substring(0,d.length-1);var g={truncate:m,name:d,suffices:y};c.push(g),h.push(d)}var E=function(e){for(var r="",i=0,a=0;a<c.length;a++){var h=c[a],f=e(h.name);if(null==f||Array.isArray(f)&&0===f.length||"object"==typeof f&&0===Object.keys(f).length)i++;else if(r+=a===i?n:t||",",Array.isArray(f)){l&&(r+=h.name+"=");for(var p=0;p<f.length;p++)p>0&&(r+=h.suffices["*"]&&t||",",h.suffices["*"]&&l&&(r+=h.name+"=")),r+=s?encodeURIComponent(f[p]).replace(/!/g,"%21"):o(f[p])}else if("object"==typeof f){l&&!h.suffices["*"]&&(r+=h.name+"=");var d=!0;for(var m in f)d||(r+=h.suffices["*"]&&t||","),d=!1,r+=s?encodeURIComponent(m).replace(/!/g,"%21"):o(m),r+=h.suffices["*"]?"=":",",r+=s?encodeURIComponent(f[m]).replace(/!/g,"%21"):o(f[m])}else l&&(r+=h.name,u&&""===f||(r+="=")),null!=h.truncate&&(f=f.substring(0,h.truncate)),r+=s?encodeURIComponent(f).replace(/!/g,"%21"):o(f)}return r};return E.varNames=h,{prefix:n,substitution:E}}function l(e){if(!(this instanceof l))return new l(e);for(var r=e.split("{"),t=[r.shift()],n=[],i=[],a=[];r.length>0;){var o=r.shift(),u=o.split("}")[0],h=o.substring(u.length+1),f=s(u);i.push(f.substitution),n.push(f.prefix),t.push(h),a=a.concat(f.substitution.varNames)}this.fill=function(e){for(var r=t[0],n=0;n<i.length;n++){r+=(0,i[n])(e),r+=t[n+1]}return r},this.varNames=a,this.template=e}l.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill((function(r){return e[r]}))}};var u=function(e,r,t,n,i){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=r,this.errors=[],this.handleError=r?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),i&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=t||y("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},e)for(var a in e.definedKeywords)this.definedKeywords[a]=e.definedKeywords[a].slice(0)};function h(e,r){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(Array.isArray(e)!==Array.isArray(r))return!1;if(Array.isArray(e)){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!h(e[t],r[t]))return!1}else{var n;for(n in e)if(void 0===r[n]&&void 0!==e[n])return!1;for(n in r)if(void 0===e[n]&&void 0!==r[n])return!1;for(n in e)if(!h(e[n],r[n]))return!1}return!0}return!1}u.prototype.defineKeyword=function(e,r){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(r)},u.prototype.createError=function(e,r,t,n,i,a,o){var s=new _(e,r,t,n,i);return s.message=this.errorReporter(s,a,o),s},u.prototype.returnError=function(e){return e},u.prototype.collectError=function(e){return e&&this.errors.push(e),null},u.prototype.prefixErrors=function(e,r,t){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(r,t);return this},u.prototype.banUnknownProperties=function(e,r){for(var t in this.unknownPropertyPaths){var n=this.createError(g.UNKNOWN_PROPERTY,{path:t},t,"",null,e,r),i=this.handleError(n);if(i)return i}return null},u.prototype.addFormat=function(e,r){if("object"==typeof e){for(var t in e)this.addFormat(t,e[t]);return this}this.formatValidators[e]=r},u.prototype.resolveRefs=function(e,r){if(void 0!==e.$ref){if((r=r||{})[e.$ref])return this.createError(g.CIRCULAR_REFERENCE,{urls:Object.keys(r).join(", ")},"","",null,void 0,e);r[e.$ref]=!0,e=this.getSchema(e.$ref,r)}return e},u.prototype.getSchema=function(e,r){var t;if(void 0!==this.schemas[e])return t=this.schemas[e],this.resolveRefs(t,r);var n=e,i="";if(-1!==e.indexOf("#")&&(i=e.substring(e.indexOf("#")+1),n=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[n]){t=this.schemas[n];var a=decodeURIComponent(i);if(""===a)return this.resolveRefs(t,r);if("/"!==a.charAt(0))return;for(var o=a.split("/").slice(1),s=0;s<o.length;s++){var l=o[s].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===t[l]){t=void 0;break}t=t[l]}if(void 0!==t)return this.resolveRefs(t,r)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},u.prototype.searchSchemas=function(e,r){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.searchSchemas(e[t],r);else if(e&&"object"==typeof e)for(var n in"string"==typeof e.id&&function(e,r){if(r.substring(0,e.length)===e){var t=r.substring(e.length);if(r.length>0&&"/"===r.charAt(e.length-1)||"#"===t.charAt(0)||"?"===t.charAt(0))return!0}return!1}(r,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e),e)if("enum"!==n)if("object"==typeof e[n])this.searchSchemas(e[n],r);else if("$ref"===n){var i=m(e[n]);i&&void 0===this.schemas[i]&&void 0===this.missingMap[i]&&(this.missingMap[i]=i)}},u.prototype.addSchema=function(e,r){if("string"!=typeof e||void 0===r){if("object"!=typeof e||"string"!=typeof e.id)return;e=(r=e).id}e===m(e)+"#"&&(e=m(e)),this.schemas[e]=r,delete this.missingMap[e],v(r,e),this.searchSchemas(r,e)},u.prototype.getSchemaMap=function(){var e={};for(var r in this.schemas)e[r]=this.schemas[r];return e},u.prototype.getSchemaUris=function(e){var r=[];for(var t in this.schemas)e&&!e.test(t)||r.push(t);return r},u.prototype.getMissingUris=function(e){var r=[];for(var t in this.missingMap)e&&!e.test(t)||r.push(t);return r},u.prototype.dropSchemas=function(){this.schemas={},this.reset()},u.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},u.prototype.validateAll=function(e,r,t,n,i){var a;if(!(r=this.resolveRefs(r)))return null;if(r instanceof _)return this.errors.push(r),r;var o,s=this.errors.length,l=null,u=null;if(this.checkRecursive&&e&&"object"==typeof e){if(a=!this.scanned.length,e[this.validatedSchemasKey]){var h=e[this.validatedSchemasKey].indexOf(r);if(-1!==h)return this.errors=this.errors.concat(e[this.validationErrorsKey][h]),null}if(Object.isFrozen(e)&&-1!==(o=this.scannedFrozen.indexOf(e))){var f=this.scannedFrozenSchemas[o].indexOf(r);if(-1!==f)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[o][f]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===o&&(o=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),l=this.scannedFrozenSchemas[o].length,this.scannedFrozenSchemas[o][l]=r,this.scannedFrozenValidationErrors[o][l]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(r){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}u=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][u]=r,e[this.validationErrorsKey][u]=[]}}var c=this.errors.length,p=this.validateBasic(e,r,i)||this.validateNumeric(e,r,i)||this.validateString(e,r,i)||this.validateArray(e,r,i)||this.validateObject(e,r,i)||this.validateCombinations(e,r,i)||this.validateHypermedia(e,r,i)||this.validateFormat(e,r,i)||this.validateDefinedKeywords(e,r,i)||null;if(a){for(;this.scanned.length;){delete this.scanned.pop()[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(p||c!==this.errors.length)for(;t&&t.length||n&&n.length;){var d=t&&t.length?""+t.pop():null,m=n&&n.length?""+n.pop():null;p&&(p=p.prefixWith(d,m)),this.prefixErrors(c,d,m)}return null!==l?this.scannedFrozenValidationErrors[o][l]=this.errors.slice(s):null!==u&&(e[this.validationErrorsKey][u]=this.errors.slice(s)),this.handleError(p)},u.prototype.validateFormat=function(e,r){if("string"!=typeof r.format||!this.formatValidators[r.format])return null;var t=this.formatValidators[r.format].call(null,e,r);return"string"==typeof t||"number"==typeof t?this.createError(g.FORMAT_CUSTOM,{message:t},"","/format",null,e,r):t&&"object"==typeof t?this.createError(g.FORMAT_CUSTOM,{message:t.message||"?"},t.dataPath||"",t.schemaPath||"/format",null,e,r):null},u.prototype.validateDefinedKeywords=function(e,r,t){for(var n in this.definedKeywords)if(void 0!==r[n])for(var i=this.definedKeywords[n],a=0;a<i.length;a++){var o=(0,i[a])(e,r[n],r,t);if("string"==typeof o||"number"==typeof o)return this.createError(g.KEYWORD_CUSTOM,{key:n,message:o},"","",null,e,r).prefixWith(null,n);if(o&&"object"==typeof o){var s=o.code;if("string"==typeof s){if(!g[s])throw new Error("Undefined error code (use defineError): "+s);s=g[s]}else"number"!=typeof s&&(s=g.KEYWORD_CUSTOM);var l="object"==typeof o.message?o.message:{key:n,message:o.message||"?"},u=o.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(s,l,o.dataPath||null,u,null,e,r)}}return null},u.prototype.validateBasic=function(e,r,t){var n;return(n=this.validateType(e,r,t))||(n=this.validateEnum(e,r,t))?n.prefixWith(null,"type"):null},u.prototype.validateType=function(e,r){if(void 0===r.type)return null;var t=typeof e;null===e?t="null":Array.isArray(e)&&(t="array");var n=r.type;Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var a=n[i];if(a===t||"integer"===a&&"number"===t&&e%1==0)return null}return this.createError(g.INVALID_TYPE,{type:t,expected:n.join("/")},"","",null,e,r)},u.prototype.validateEnum=function(e,r){if(void 0===r.enum)return null;for(var t=0;t<r.enum.length;t++){if(h(e,r.enum[t]))return null}return this.createError(g.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e},"","",null,e,r)},u.prototype.validateNumeric=function(e,r,t){return this.validateMultipleOf(e,r,t)||this.validateMinMax(e,r,t)||this.validateNaN(e,r,t)||null};var f=Math.pow(2,-51),c=1-f;function p(e){var r=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return r?{href:r[0]||"",protocol:r[1]||"",authority:r[2]||"",host:r[3]||"",hostname:r[4]||"",port:r[5]||"",pathname:r[6]||"",search:r[7]||"",hash:r[8]||""}:null}function d(e,r){return r=p(r||""),e=p(e||""),r&&e?(r.protocol||e.protocol)+(r.protocol||r.authority?r.authority:e.authority)+(t=r.protocol||r.authority||"/"===r.pathname.charAt(0)?r.pathname:r.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+r.pathname:e.pathname,n=[],t.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,(function(e){"/.."===e?n.pop():n.push(e)})),n.join("").replace(/^\//,"/"===t.charAt(0)?"/":""))+(r.protocol||r.authority||r.pathname?r.search:r.search||e.search)+r.hash:null;var t,n}function m(e){return e.split("#")[0]}function v(e,r){if(e&&"object"==typeof e)if(void 0===r?r=e.id:"string"==typeof e.id&&(r=d(r,e.id),e.id=r),Array.isArray(e))for(var t=0;t<e.length;t++)v(e[t],r);else for(var n in"string"==typeof e.$ref&&(e.$ref=d(r,e.$ref)),e)"enum"!==n&&v(e[n],r)}function y(e){var r=A[e=e||"en"];return function(e){var t=r[e.code]||P[e.code];if("string"!=typeof t)return"Unknown error code "+e.code+": "+JSON.stringify(e.messageParams);var n=e.params;return t.replace(/\{([^{}]*)\}/g,(function(e,r){var t=n[r];return"string"==typeof t||"number"==typeof t?t:e}))}}u.prototype.validateMultipleOf=function(e,r){var t=r.multipleOf||r.divisibleBy;if(void 0===t)return null;if("number"==typeof e){var n=e/t%1;if(n>=f&&n<c)return this.createError(g.NUMBER_MULTIPLE_OF,{value:e,multipleOf:t},"","",null,e,r)}return null},u.prototype.validateMinMax=function(e,r){if("number"!=typeof e)return null;if(void 0!==r.minimum){if(e<r.minimum)return this.createError(g.NUMBER_MINIMUM,{value:e,minimum:r.minimum},"","/minimum",null,e,r);if(r.exclusiveMinimum&&e===r.minimum)return this.createError(g.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:r.minimum},"","/exclusiveMinimum",null,e,r)}if(void 0!==r.maximum){if(e>r.maximum)return this.createError(g.NUMBER_MAXIMUM,{value:e,maximum:r.maximum},"","/maximum",null,e,r);if(r.exclusiveMaximum&&e===r.maximum)return this.createError(g.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:r.maximum},"","/exclusiveMaximum",null,e,r)}return null},u.prototype.validateNaN=function(e,r){return"number"!=typeof e?null:!0===isNaN(e)||e===1/0||e===-1/0?this.createError(g.NUMBER_NOT_A_NUMBER,{value:e},"","/type",null,e,r):null},u.prototype.validateString=function(e,r,t){return this.validateStringLength(e,r,t)||this.validateStringPattern(e,r,t)||null},u.prototype.validateStringLength=function(e,r){return"string"!=typeof e?null:void 0!==r.minLength&&e.length<r.minLength?this.createError(g.STRING_LENGTH_SHORT,{length:e.length,minimum:r.minLength},"","/minLength",null,e,r):void 0!==r.maxLength&&e.length>r.maxLength?this.createError(g.STRING_LENGTH_LONG,{length:e.length,maximum:r.maxLength},"","/maxLength",null,e,r):null},u.prototype.validateStringPattern=function(e,r){if("string"!=typeof e||"string"!=typeof r.pattern&&!(r.pattern instanceof RegExp))return null;var t;if(r.pattern instanceof RegExp)t=r.pattern;else{var n,i="",a=r.pattern.match(/^\/(.+)\/([img]*)$/);a?(n=a[1],i=a[2]):n=r.pattern,t=new RegExp(n,i)}return t.test(e)?null:this.createError(g.STRING_PATTERN,{pattern:r.pattern},"","/pattern",null,e,r)},u.prototype.validateArray=function(e,r,t){return Array.isArray(e)&&(this.validateArrayLength(e,r,t)||this.validateArrayUniqueItems(e,r,t)||this.validateArrayItems(e,r,t))||null},u.prototype.validateArrayLength=function(e,r){var t;return void 0!==r.minItems&&e.length<r.minItems&&(t=this.createError(g.ARRAY_LENGTH_SHORT,{length:e.length,minimum:r.minItems},"","/minItems",null,e,r),this.handleError(t))||void 0!==r.maxItems&&e.length>r.maxItems&&(t=this.createError(g.ARRAY_LENGTH_LONG,{length:e.length,maximum:r.maxItems},"","/maxItems",null,e,r),this.handleError(t))?t:null},u.prototype.validateArrayUniqueItems=function(e,r){if(r.uniqueItems)for(var t=0;t<e.length;t++)for(var n=t+1;n<e.length;n++)if(h(e[t],e[n])){var i=this.createError(g.ARRAY_UNIQUE,{match1:t,match2:n},"","/uniqueItems",null,e,r);if(this.handleError(i))return i}return null},u.prototype.validateArrayItems=function(e,r,t){if(void 0===r.items)return null;var n,i;if(Array.isArray(r.items)){for(i=0;i<e.length;i++)if(i<r.items.length){if(n=this.validateAll(e[i],r.items[i],[i],["items",i],t+"/"+i))return n}else if(void 0!==r.additionalItems)if("boolean"==typeof r.additionalItems){if(!r.additionalItems&&(n=this.createError(g.ARRAY_ADDITIONAL_ITEMS,{},"/"+i,"/additionalItems",null,e,r),this.handleError(n)))return n}else if(n=this.validateAll(e[i],r.additionalItems,[i],["additionalItems"],t+"/"+i))return n}else for(i=0;i<e.length;i++)if(n=this.validateAll(e[i],r.items,[i],["items"],t+"/"+i))return n;return null},u.prototype.validateObject=function(e,r,t){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,r,t)||this.validateObjectRequiredProperties(e,r,t)||this.validateObjectProperties(e,r,t)||this.validateObjectDependencies(e,r,t)||null},u.prototype.validateObjectMinMaxProperties=function(e,r){var t,n=Object.keys(e);return void 0!==r.minProperties&&n.length<r.minProperties&&(t=this.createError(g.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:r.minProperties},"","/minProperties",null,e,r),this.handleError(t))||void 0!==r.maxProperties&&n.length>r.maxProperties&&(t=this.createError(g.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:r.maxProperties},"","/maxProperties",null,e,r),this.handleError(t))?t:null},u.prototype.validateObjectRequiredProperties=function(e,r){if(void 0!==r.required)for(var t=0;t<r.required.length;t++){var n=r.required[t];if(void 0===e[n]){var i=this.createError(g.OBJECT_REQUIRED,{key:n},"","/required/"+t,null,e,r);if(this.handleError(i))return i}}return null},u.prototype.validateObjectProperties=function(e,r,t){var n;for(var i in e){var a=t+"/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),o=!1;if(void 0!==r.properties&&void 0!==r.properties[i]&&(o=!0,n=this.validateAll(e[i],r.properties[i],[i],["properties",i],a)))return n;if(void 0!==r.patternProperties)for(var s in r.patternProperties){if(new RegExp(s).test(i)&&(o=!0,n=this.validateAll(e[i],r.patternProperties[s],[i],["patternProperties",s],a)))return n}if(o)this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]);else if(void 0!==r.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]),"boolean"==typeof r.additionalProperties){if(!r.additionalProperties&&(n=this.createError(g.OBJECT_ADDITIONAL_PROPERTIES,{key:i},"","/additionalProperties",null,e,r).prefixWith(i,null),this.handleError(n)))return n}else if(n=this.validateAll(e[i],r.additionalProperties,[i],["additionalProperties"],a))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[a]&&(this.unknownPropertyPaths[a]=!0)}return null},u.prototype.validateObjectDependencies=function(e,r,t){var n;if(void 0!==r.dependencies)for(var i in r.dependencies)if(void 0!==e[i]){var a=r.dependencies[i];if("string"==typeof a){if(void 0===e[a]&&(n=this.createError(g.OBJECT_DEPENDENCY_KEY,{key:i,missing:a},"","",null,e,r).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(a))for(var o=0;o<a.length;o++){var s=a[o];if(void 0===e[s]&&(n=this.createError(g.OBJECT_DEPENDENCY_KEY,{key:i,missing:s},"","/"+o,null,e,r).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,a,[],["dependencies",i],t))return n}return null},u.prototype.validateCombinations=function(e,r,t){return this.validateAllOf(e,r,t)||this.validateAnyOf(e,r,t)||this.validateOneOf(e,r,t)||this.validateNot(e,r,t)||null},u.prototype.validateAllOf=function(e,r,t){if(void 0===r.allOf)return null;for(var n,i=0;i<r.allOf.length;i++){var a=r.allOf[i];if(n=this.validateAll(e,a,[],["allOf",i],t))return n}return null},u.prototype.validateAnyOf=function(e,r,t){if(void 0===r.anyOf)return null;var n,i,a=[],o=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var s=!0,l=0;l<r.anyOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=r.anyOf[l],h=this.errors.length,f=this.validateAll(e,u,[],["anyOf",l],t);if(null===f&&h===this.errors.length){if(this.errors=this.errors.slice(0,o),this.trackUnknownProperties){for(var c in this.knownPropertyPaths)i[c]=!0,delete n[c];for(var p in this.unknownPropertyPaths)i[p]||(n[p]=!0);s=!1;continue}return null}f&&a.push(f.prefixWith(null,""+l).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),s?(a=a.concat(this.errors.slice(o)),this.errors=this.errors.slice(0,o),this.createError(g.ANY_OF_MISSING,{},"","/anyOf",a,e,r)):void 0},u.prototype.validateOneOf=function(e,r,t){if(void 0===r.oneOf)return null;var n,i,a=null,o=[],s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var l=0;l<r.oneOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=r.oneOf[l],h=this.errors.length,f=this.validateAll(e,u,[],["oneOf",l],t);if(null===f&&h===this.errors.length){if(null!==a)return this.errors=this.errors.slice(0,s),this.createError(g.ONE_OF_MULTIPLE,{index1:a,index2:l},"","/oneOf",null,e,r);if(a=l,this.trackUnknownProperties){for(var c in this.knownPropertyPaths)i[c]=!0,delete n[c];for(var p in this.unknownPropertyPaths)i[p]||(n[p]=!0)}}else f&&o.push(f)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===a?(o=o.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(g.ONE_OF_MISSING,{},"","/oneOf",o,e,r)):(this.errors=this.errors.slice(0,s),null)},u.prototype.validateNot=function(e,r,t){if(void 0===r.not)return null;var n,i,a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var o=this.validateAll(e,r.not,null,null,t),s=this.errors.slice(a);return this.errors=this.errors.slice(0,a),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===o&&0===s.length?this.createError(g.NOT_PASSED,{},"","/not",null,e,r):null},u.prototype.validateHypermedia=function(e,r,t){if(!r.links)return null;for(var n,i=0;i<r.links.length;i++){var a=r.links[i];if("describedby"===a.rel){for(var o=new l(a.href),s=!0,u=0;u<o.varNames.length;u++)if(!(o.varNames[u]in e)){s=!1;break}if(s){var h={$ref:o.fillFromObject(e)};if(n=this.validateAll(e,h,[],["links",i],t))return n}}}};var g={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},E={};for(var O in g)E[g[O]]=O;var P={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function _(e,r,t,n,i){if(Error.call(this),void 0===e)throw new Error("No error code supplied: "+n);this.message="",this.params=r,this.code=e,this.dataPath=t||"",this.schemaPath=n||"",this.subErrors=i||null;var a=new Error(this.message);if(this.stack=a.stack||a.stacktrace,!this.stack)try{throw a}catch(a){this.stack=a.stack||a.stacktrace}}_.prototype=Object.create(Error.prototype),_.prototype.constructor=_,_.prototype.name="ValidationError",_.prototype.prefixWith=function(e,r){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==r&&(r=r.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+r+this.schemaPath),null!==this.subErrors)for(var t=0;t<this.subErrors.length;t++)this.subErrors[t].prefixWith(e,r);return this};var A={};var M=function e(r){var t,n,i=new u,a={setErrorReporter:function(e){return"string"==typeof e?this.language(e):(n=e,!0)},addFormat:function(){i.addFormat.apply(i,arguments)},language:function(e){return e?(A[e]||(e=e.split("-")[0]),!!A[e]&&(t=e,e)):t},addLanguage:function(e,r){var t;for(t in g)r[t]&&!r[g[t]]&&(r[g[t]]=r[t]);var n=e.split("-")[0];if(A[n])for(t in A[e]=Object.create(A[n]),r)void 0===A[n][t]&&(A[n][t]=r[t]),A[e][t]=r[t];else A[e]=r,A[n]=r;return this},freshApi:function(r){var t=e();return r&&t.language(r),t},validate:function(e,r,a,o){var s=y(t),l=new u(i,!1,n?function(e,r,t){return n(e,r,t)||s(e,r,t)}:s,a,o);"string"==typeof r&&(r={$ref:r}),l.addSchema("",r);var h=l.validateAll(e,r,null,null,"");return!h&&o&&(h=l.banUnknownProperties(e,r)),this.error=h,this.missing=l.missing,this.valid=null===h,this.valid},validateResult:function(){var e={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(e,arguments),e},validateMultiple:function(e,r,a,o){var s=y(t),l=new u(i,!0,n?function(e,r,t){return n(e,r,t)||s(e,r,t)}:s,a,o);"string"==typeof r&&(r={$ref:r}),l.addSchema("",r),l.validateAll(e,r,null,null,""),o&&l.banUnknownProperties(e,r);var h={toString:function(){return this.valid?"valid":this.error.message}};return h.errors=l.errors,h.missing=l.missing,h.valid=0===h.errors.length,h},addSchema:function(){return i.addSchema.apply(i,arguments)},getSchema:function(){return i.getSchema.apply(i,arguments)},getSchemaMap:function(){return i.getSchemaMap.apply(i,arguments)},getSchemaUris:function(){return i.getSchemaUris.apply(i,arguments)},getMissingUris:function(){return i.getMissingUris.apply(i,arguments)},dropSchemas:function(){i.dropSchemas.apply(i,arguments)},defineKeyword:function(){i.defineKeyword.apply(i,arguments)},defineError:function(e,r,t){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof r||r%1!=0||r<1e4)throw new Error("Code number must be an integer > 10000");if(void 0!==g[e])throw new Error("Error already defined: "+e+" as "+g[e]);if(void 0!==E[r])throw new Error("Error code already used: "+E[r]+" as "+r);for(var n in g[e]=r,E[r]=e,P[e]=P[r]=t,A){var i=A[n];i[e]&&(i[r]=i[r]||i[e])}},reset:function(){i.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:v,resolveUrl:d,getDocumentUri:m,errorCodes:g};return a.language(r||"en"),a}();return M.addLanguage("en-gb",P),M.tv4=M,M}))}));export{h as query_param};
//# sourceMappingURL=svelte-commons.js.map
